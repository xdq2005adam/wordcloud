# ğŸš€ Cloudflare å…è´¹äºŒçº§åŸŸååŠ é€Ÿæ•™ç¨‹ï¼ˆæ— éœ€è´­ä¹°åŸŸåï¼‰

> **é€‚åˆäººç¾¤ï¼š** å®Œå…¨æ–°æ‰‹ï¼Œæ²¡æœ‰åŸŸåï¼Œåªæƒ³ç”¨ Cloudflare å…è´¹äºŒçº§åŸŸååŠ é€Ÿ Railway éƒ¨ç½²

---

## ğŸ“‹ æ•™ç¨‹æ¦‚è¿°

è¿™ä¸ªæ•™ç¨‹ä¼šæ•™ä½ ï¼š
- âœ… ä½¿ç”¨ Cloudflare æä¾›çš„**å…è´¹äºŒçº§åŸŸå**ï¼ˆæ ¼å¼ï¼š`xxx.trycloudflare.com`ï¼‰
- âœ… æ— éœ€è´­ä¹°ä»»ä½•åŸŸåï¼Œå®Œå…¨å…è´¹
- âœ… è®©ä½ çš„ Railway åº”ç”¨é€šè¿‡ Cloudflare åŠ é€Ÿï¼ˆå›½å†…è®¿é—®æ›´å¿«ï¼‰
- âœ… è‡ªåŠ¨è·å¾— HTTPS è¯ä¹¦ï¼ˆSSLï¼‰
- âœ… æ”¯æŒ WebSocketï¼ˆä½ çš„è¯äº‘åº”ç”¨å¯ä»¥æ­£å¸¸å·¥ä½œï¼‰

**é¢„è®¡æ—¶é—´ï¼š** 20-30 åˆ†é’Ÿ

---

## ğŸ¯ å‰ç½®æ¡ä»¶

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ï¼š
- âœ… ä½ çš„åº”ç”¨å·²ç»éƒ¨ç½²åœ¨ Railway ä¸Šï¼ˆå¦‚æœè¿˜æ²¡éƒ¨ç½²ï¼Œè¯·å…ˆå®Œæˆéƒ¨ç½²ï¼‰
- âœ… ä½ çŸ¥é“ä½ çš„ Railway URLï¼ˆä¾‹å¦‚ï¼š`web-production-27bb4.up.railway.app`ï¼‰
- âœ… æœ‰ä¸€å°ç”µè„‘ï¼ˆWindowsã€Mac æˆ– Linux éƒ½å¯ä»¥ï¼‰
- âœ… æœ‰ç½‘ç»œè¿æ¥

---

## ç¬¬ä¸€æ­¥ï¼šæ³¨å†Œ Cloudflare è´¦å·ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰

### æ­¥éª¤ 1.1ï¼šè®¿é—® Cloudflare å®˜ç½‘

1. æ‰“å¼€æµè§ˆå™¨ï¼ˆChromeã€Edgeã€Firefox éƒ½å¯ä»¥ï¼‰
2. è®¿é—®ï¼š**https://dash.cloudflare.com/sign-up**
3. æˆ–è€…è®¿é—®ï¼š**https://cloudflare.com**ï¼Œç„¶åç‚¹å‡»å³ä¸Šè§’çš„ **"Sign Up"**

### æ­¥éª¤ 1.2ï¼šæ³¨å†Œè´¦å·

1. è¾“å…¥ä½ çš„**é‚®ç®±åœ°å€**ï¼ˆå»ºè®®ä½¿ç”¨å¸¸ç”¨é‚®ç®±ï¼Œå¦‚ Gmailã€QQ é‚®ç®±ç­‰ï¼‰
2. è¾“å…¥**å¯†ç **ï¼ˆè‡³å°‘ 8 ä¸ªå­—ç¬¦ï¼Œå»ºè®®åŒ…å«å¤§å°å†™å­—æ¯å’Œæ•°å­—ï¼‰
3. ç‚¹å‡» **"Sign Up"**ï¼ˆæ³¨å†Œï¼‰

**ç¤ºä¾‹ï¼š**
```
é‚®ç®±ï¼šyour-email@gmail.com
å¯†ç ï¼šYourPassword123
```

### æ­¥éª¤ 1.3ï¼šéªŒè¯é‚®ç®±

1. æŸ¥çœ‹ä½ çš„é‚®ç®±æ”¶ä»¶ç®±
2. æ‰¾åˆ°æ¥è‡ª Cloudflare çš„éªŒè¯é‚®ä»¶
3. ç‚¹å‡»é‚®ä»¶ä¸­çš„**éªŒè¯é“¾æ¥**
4. å¦‚æœæ²¡æ”¶åˆ°é‚®ä»¶ï¼Œæ£€æŸ¥åƒåœ¾é‚®ä»¶æ–‡ä»¶å¤¹

### æ­¥éª¤ 1.4ï¼šç™»å½• Cloudflare

1. éªŒè¯é‚®ç®±åï¼Œè®¿é—®ï¼š**https://dash.cloudflare.com**
2. è¾“å…¥ä½ çš„é‚®ç®±å’Œå¯†ç 
3. ç‚¹å‡» **"Log in"**ï¼ˆç™»å½•ï¼‰

**âœ… å®Œæˆï¼** ç°åœ¨ä½ åº”è¯¥èƒ½çœ‹åˆ° Cloudflare çš„æ§åˆ¶å°äº†ã€‚

---

## ç¬¬äºŒæ­¥ï¼šå®‰è£… cloudflaredï¼ˆCloudflare Tunnel å®¢æˆ·ç«¯ï¼‰

`cloudflared` æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨æ¥åˆ›å»ºå’Œç®¡ç† Cloudflare Tunnelã€‚

### æ­¥éª¤ 2.1ï¼šé€‰æ‹©ä½ çš„æ“ä½œç³»ç»Ÿ

æ ¹æ®ä½ çš„ç”µè„‘ç³»ç»Ÿï¼Œé€‰æ‹©å¯¹åº”çš„å®‰è£…æ–¹æ³•ï¼š

---

### ğŸ“± Windows ç³»ç»Ÿå®‰è£…æ–¹æ³•

#### æ–¹æ³• Aï¼šä½¿ç”¨ PowerShell ä¸‹è½½ï¼ˆæ¨èï¼Œæœ€ç®€å•ï¼‰

1. **æ‰“å¼€ PowerShell**
   - æŒ‰ `Win + X` é”®
   - é€‰æ‹© **"Windows PowerShell"** æˆ– **"ç»ˆç«¯"**
   - æˆ–è€…æŒ‰ `Win + R`ï¼Œè¾“å…¥ `powershell`ï¼Œå›è½¦

2. **ä¸‹è½½ cloudflared**
   åœ¨ PowerShell ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼ˆ**ä¸€è¡Œä¸€è¡Œå¤åˆ¶ç²˜è´´**ï¼‰ï¼š

   ```powershell
   # åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶å¤¹ï¼ˆå¯é€‰ï¼‰
   cd $env:USERPROFILE\Desktop
   
   # ä¸‹è½½ cloudflared
   Invoke-WebRequest -Uri "https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-windows-amd64.exe" -OutFile "cloudflared.exe"
   ```

3. **ç­‰å¾…ä¸‹è½½å®Œæˆ**
   - ä¸‹è½½å®Œæˆåï¼Œä½ åº”è¯¥èƒ½åœ¨æ¡Œé¢ä¸Šçœ‹åˆ° `cloudflared.exe` æ–‡ä»¶

4. **éªŒè¯å®‰è£…**
   åœ¨ PowerShell ä¸­è¾“å…¥ï¼š
   ```powershell
   cd $env:USERPROFILE\Desktop
   .\cloudflared.exe --version
   ```
   
   å¦‚æœçœ‹åˆ°ç‰ˆæœ¬å·ï¼ˆä¾‹å¦‚ï¼š`cloudflared 2024.x.x`ï¼‰ï¼Œè¯´æ˜å®‰è£…æˆåŠŸï¼

5. **ï¼ˆå¯é€‰ï¼‰æ·»åŠ åˆ° PATH**
   å¦‚æœä½ æƒ³åœ¨ä»»ä½•åœ°æ–¹éƒ½èƒ½ä½¿ç”¨ `cloudflared`ï¼Œå¯ä»¥ï¼š
   - å°† `cloudflared.exe` å¤åˆ¶åˆ° `C:\Windows\System32\` æ–‡ä»¶å¤¹
   - æˆ–è€…åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ˆå¦‚ `C:\cloudflared\`ï¼‰ï¼Œå°†æ–‡ä»¶æ”¾è¿›å»ï¼Œç„¶åæ·»åŠ åˆ°ç³»ç»Ÿ PATH

**âœ… Windows å®‰è£…å®Œæˆï¼**

---

### ğŸ macOS ç³»ç»Ÿå®‰è£…æ–¹æ³•

#### æ–¹æ³• Aï¼šä½¿ç”¨ Homebrewï¼ˆæ¨èï¼‰

1. **æ‰“å¼€ç»ˆç«¯ï¼ˆTerminalï¼‰**
   - æŒ‰ `Cmd + Space`ï¼Œè¾“å…¥ "Terminal"ï¼Œå›è½¦

2. **å®‰è£… Homebrew**ï¼ˆå¦‚æœè¿˜æ²¡å®‰è£…ï¼‰
   ```bash
   /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
   ```
   æŒ‰ç…§æç¤ºè¾“å…¥å¯†ç å’Œç¡®è®¤

3. **å®‰è£… cloudflared**
   ```bash
   brew install cloudflared
   ```

4. **éªŒè¯å®‰è£…**
   ```bash
   cloudflared --version
   ```

**âœ… macOS å®‰è£…å®Œæˆï¼**

---

### ğŸ§ Linux ç³»ç»Ÿå®‰è£…æ–¹æ³•

#### Ubuntu/Debian ç³»ç»Ÿï¼š

```bash
# ä¸‹è½½å®‰è£…åŒ…
wget https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64.deb

# å®‰è£…
sudo dpkg -i cloudflared-linux-amd64.deb

# éªŒè¯
cloudflared --version
```

#### å…¶ä»– Linux å‘è¡Œç‰ˆï¼š

```bash
# ä¸‹è½½å¯æ‰§è¡Œæ–‡ä»¶
curl -L https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64 -o cloudflared

# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x cloudflared

# ç§»åŠ¨åˆ°ç³»ç»Ÿè·¯å¾„ï¼ˆå¯é€‰ï¼‰
sudo mv cloudflared /usr/local/bin/

# éªŒè¯
cloudflared --version
```

**âœ… Linux å®‰è£…å®Œæˆï¼**

---

## ç¬¬ä¸‰æ­¥ï¼šç™»å½• Cloudflare è´¦æˆ·

è¿™ä¸€æ­¥ä¼šè®© `cloudflared` å·¥å…·è¿æ¥åˆ°ä½ çš„ Cloudflare è´¦æˆ·ã€‚

### æ­¥éª¤ 3.1ï¼šæ‰“å¼€å‘½ä»¤è¡Œ/PowerShell/ç»ˆç«¯

- **Windowsï¼š** æ‰“å¼€ PowerShell
- **macOSï¼š** æ‰“å¼€ Terminal
- **Linuxï¼š** æ‰“å¼€ç»ˆç«¯

### æ­¥éª¤ 3.2ï¼šè¿è¡Œç™»å½•å‘½ä»¤

**Windowsï¼ˆå¦‚æœ cloudflared.exe åœ¨æ¡Œé¢ï¼‰ï¼š**
```powershell
cd $env:USERPROFILE\Desktop
.\cloudflared.exe tunnel login
```

**macOS/Linuxï¼š**
```bash
cloudflared tunnel login
```

### æ­¥éª¤ 3.3ï¼šæˆæƒè®¿é—®

1. **å‘½ä»¤è¿è¡Œåï¼Œä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨**
   - å¦‚æœæ²¡æœ‰è‡ªåŠ¨æ‰“å¼€ï¼Œä¼šæ˜¾ç¤ºä¸€ä¸ª URLï¼Œæ‰‹åŠ¨å¤åˆ¶åˆ°æµè§ˆå™¨æ‰“å¼€

2. **é€‰æ‹©ä½ çš„åŸŸå**
   - å¦‚æœä½ è¿˜æ²¡æœ‰æ·»åŠ ä»»ä½•åŸŸååˆ° Cloudflareï¼Œä¼šæ˜¾ç¤ºä¸€ä¸ªç©ºåˆ—è¡¨
   - **æ²¡å…³ç³»ï¼** ç‚¹å‡» **"Authorize"**ï¼ˆæˆæƒï¼‰æŒ‰é’®
   - è¿™ä¼šåˆ›å»ºä¸€ä¸ªç‰¹æ®Šçš„è´¦æˆ·æƒé™ï¼Œç”¨äº Tunnel åŠŸèƒ½

3. **å®Œæˆæˆæƒ**
   - æµè§ˆå™¨ä¼šæ˜¾ç¤º "Success!"ï¼ˆæˆåŠŸï¼‰
   - ä½ å¯ä»¥å…³é—­æµè§ˆå™¨çª—å£

4. **è¿”å›å‘½ä»¤è¡Œ**
   - å‘½ä»¤è¡Œåº”è¯¥æ˜¾ç¤ºç±»ä¼¼ï¼š`âœ… Login successful`ï¼ˆç™»å½•æˆåŠŸï¼‰

**âœ… ç™»å½•å®Œæˆï¼**

---

## ç¬¬å››æ­¥ï¼šåˆ›å»ºæ°¸ä¹…éš§é“

ç°åœ¨æˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ª**æ°¸ä¹…éš§é“**ï¼Œå®ƒä¼šç»™ä½ ä¸€ä¸ªå…è´¹çš„äºŒçº§åŸŸåã€‚

### æ­¥éª¤ 4.1ï¼šåˆ›å»ºéš§é“

åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ï¼ˆå°† `wordcloud` æ”¹æˆä½ å–œæ¬¢çš„åå­—ï¼Œæ¯”å¦‚ `myapp`ã€`wordcloud` ç­‰ï¼‰ï¼š

**Windowsï¼š**
```powershell
cd $env:USERPROFILE\Desktop
.\cloudflared.exe tunnel create wordcloud
```

**macOS/Linuxï¼š**
```bash
cloudflared tunnel create wordcloud
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
Created tunnel wordcloud with id xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
```

**é‡è¦ï¼š** è®°ä½è¿™ä¸ª**éš§é“ ID**ï¼ˆä¸Šé¢çš„ `xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx`ï¼‰ï¼Œåé¢ä¼šç”¨åˆ°ï¼

### æ­¥éª¤ 4.2ï¼šåˆ›å»ºè·¯ç”±ï¼ˆè·å–å…è´¹åŸŸåï¼‰

ç°åœ¨æˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ª DNS è·¯ç”±ï¼Œè¿™æ ·å°±èƒ½è·å¾—å…è´¹åŸŸåäº†ã€‚

**Windowsï¼š**
```powershell
.\cloudflared.exe tunnel route dns wordcloud wordcloud-app.trycloudflare.com
```

**macOS/Linuxï¼š**
```bash
cloudflared tunnel route dns wordcloud wordcloud-app.trycloudflare.com
```

**è¯´æ˜ï¼š**
- `wordcloud` æ˜¯ä½ åˆšæ‰åˆ›å»ºçš„éš§é“åç§°
- `wordcloud-app.trycloudflare.com` æ˜¯ä½ æƒ³è¦çš„åŸŸåï¼ˆå¯ä»¥æ”¹æˆä»»ä½•åå­—ï¼Œä½†å¿…é¡»ä»¥ `.trycloudflare.com` ç»“å°¾ï¼‰

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
âœ… DNS record created: wordcloud-app.trycloudflare.com
```

**ğŸ‰ æ­å–œï¼** ä½ ç°åœ¨æœ‰ä¸€ä¸ªå…è´¹åŸŸåäº†ï¼š`wordcloud-app.trycloudflare.com`

**æ³¨æ„ï¼š** å¦‚æœä½ æƒ³è¦ä¸åŒçš„åŸŸåï¼Œå¯ä»¥å†è¿è¡Œä¸€æ¬¡å‘½ä»¤ï¼Œä½¿ç”¨ä¸åŒçš„åå­—ã€‚

---

## ç¬¬äº”æ­¥ï¼šåˆ›å»ºé…ç½®æ–‡ä»¶

æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå‘Šè¯‰ Cloudflare Tunnel å¦‚ä½•è¿æ¥åˆ°ä½ çš„ Railway åº”ç”¨ã€‚

### æ­¥éª¤ 5.1ï¼šæ‰¾åˆ°é…ç½®æ–‡ä»¶ä½ç½®

**Windowsï¼š**
é…ç½®æ–‡ä»¶ä½ç½®ï¼š`C:\Users\ä½ çš„ç”¨æˆ·å\.cloudflared\config.yml`

ä¾‹å¦‚ï¼š`C:\Users\å¼ ä¸‰\.cloudflared\config.yml`

**macOS/Linuxï¼š**
é…ç½®æ–‡ä»¶ä½ç½®ï¼š`~/.cloudflared/config.yml`

ä¾‹å¦‚ï¼š`/Users/ä½ çš„ç”¨æˆ·å/.cloudflared/config.yml`

### æ­¥éª¤ 5.2ï¼šåˆ›å»ºé…ç½®æ–‡ä»¶ç›®å½•

**Windowsï¼ˆPowerShellï¼‰ï¼š**
```powershell
# åˆ›å»ºç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
New-Item -ItemType Directory -Force -Path "$env:USERPROFILE\.cloudflared"
```

**macOS/Linuxï¼š**
```bash
mkdir -p ~/.cloudflared
```

### æ­¥éª¤ 5.3ï¼šåˆ›å»ºé…ç½®æ–‡ä»¶

**Windowsï¼š**
```powershell
# æ‰“å¼€è®°äº‹æœ¬åˆ›å»ºæ–‡ä»¶
notepad "$env:USERPROFILE\.cloudflared\config.yml"
```

**macOS/Linuxï¼š**
```bash
nano ~/.cloudflared/config.yml
```

### æ­¥éª¤ 5.4ï¼šç¼–è¾‘é…ç½®æ–‡ä»¶å†…å®¹

**é‡è¦ï¼š** ä½ éœ€è¦æ›¿æ¢ä»¥ä¸‹å†…å®¹ï¼š
1. `xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx` â†’ ä½ çš„**éš§é“ ID**ï¼ˆç¬¬å››æ­¥ä¸­è·å¾—çš„ï¼‰
2. `ä½ çš„ç”¨æˆ·å` â†’ ä½ çš„ Windows/macOS/Linux ç”¨æˆ·å
3. `wordcloud-app.trycloudflare.com` â†’ ä½ çš„åŸŸåï¼ˆå¦‚æœä¸åŒï¼‰
4. `web-production-27bb4.up.railway.app` â†’ ä½ çš„ **Railway URL**

**Windows é…ç½®æ–‡ä»¶å†…å®¹ï¼š**

```yaml
tunnel: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
credentials-file: C:\Users\ä½ çš„ç”¨æˆ·å\.cloudflared\xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.json

ingress:
  - hostname: wordcloud-app.trycloudflare.com
    service: https://web-production-27bb4.up.railway.app
  
  - service: http_status:404
```

**macOS/Linux é…ç½®æ–‡ä»¶å†…å®¹ï¼š**

```yaml
tunnel: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
credentials-file: /Users/ä½ çš„ç”¨æˆ·å/.cloudflared/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.json

ingress:
  - hostname: wordcloud-app.trycloudflare.com
    service: https://web-production-27bb4.up.railway.app
  
  - service: http_status:404
```

**è¯¦ç»†è¯´æ˜ï¼š**
- `tunnel:` åé¢æ˜¯ä½ çš„éš§é“ ID
- `credentials-file:` æ˜¯è®¤è¯æ–‡ä»¶è·¯å¾„ï¼ˆ**æ–‡ä»¶åæ˜¯ä½ çš„éš§é“ ID + `.json`**ï¼‰
- `hostname:` æ˜¯ä½ çš„å…è´¹åŸŸå
- `service:` æ˜¯ä½ çš„ Railway URLï¼ˆ**ç¡®ä¿æ˜¯ HTTPS**ï¼‰

### æ­¥éª¤ 5.5ï¼šä¿å­˜æ–‡ä»¶

- **Windowsï¼ˆè®°äº‹æœ¬ï¼‰ï¼š** æŒ‰ `Ctrl + S` ä¿å­˜ï¼Œç„¶åå…³é—­è®°äº‹æœ¬
- **macOS/Linuxï¼ˆnanoï¼‰ï¼š** æŒ‰ `Ctrl + X`ï¼Œç„¶åæŒ‰ `Y`ï¼Œå†æŒ‰ `Enter` ä¿å­˜

**âœ… é…ç½®æ–‡ä»¶åˆ›å»ºå®Œæˆï¼**

---

## ç¬¬å…­æ­¥ï¼šæµ‹è¯•éš§é“ï¼ˆæœ¬åœ°æµ‹è¯•ï¼‰

åœ¨éƒ¨ç½²åˆ° Railway ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆåœ¨æœ¬åœ°æµ‹è¯•ä¸€ä¸‹éš§é“æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚

### æ­¥éª¤ 6.1ï¼šè¿è¡Œéš§é“

**Windowsï¼š**
```powershell
cd $env:USERPROFILE\Desktop
.\cloudflared.exe tunnel run wordcloud
```

**macOS/Linuxï¼š**
```bash
cloudflared tunnel run wordcloud
```

### æ­¥éª¤ 6.2ï¼šæŸ¥çœ‹è¾“å‡º

ä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºï¼š
```
2024-01-01T12:00:00Z INF Starting metrics server
2024-01-01T12:00:00Z INF +--------------------------------------------------------------------------------------------+
2024-01-01T12:00:00Z INF |  Your quick Tunnel has been created! Visit it at (it may take some time to be reachable): |
2024-01-01T12:00:00Z INF |  https://wordcloud-app.trycloudflare.com                                 |
2024-01-01T12:00:00Z INF +--------------------------------------------------------------------------------------------+
```

### æ­¥éª¤ 6.3ï¼šæµ‹è¯•è®¿é—®

1. **ä¿æŒå‘½ä»¤è¡Œçª—å£å¼€ç€**ï¼ˆä¸è¦å…³é—­ï¼ï¼‰
2. **æ‰“å¼€æµè§ˆå™¨**
3. **è®¿é—®ä½ çš„åŸŸåï¼š** `https://wordcloud-app.trycloudflare.com`
4. **åº”è¯¥èƒ½çœ‹åˆ°ä½ çš„è¯äº‘åº”ç”¨äº†ï¼**

### æ­¥éª¤ 6.4ï¼šæµ‹è¯• WebSocket

1. **æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·**ï¼ˆæŒ‰ `F12`ï¼‰
2. **è¿›å…¥ Consoleï¼ˆæ§åˆ¶å°ï¼‰æ ‡ç­¾**
3. **è®¿é—®ä¸»é¡µé¢**ï¼Œåº”è¯¥çœ‹åˆ°ï¼š
   ```
   âœ“ WebSocketè¿æ¥æˆåŠŸï¼Socket ID: xxx
   ```

4. **æ‰“å¼€è¾“å…¥é¡µé¢ï¼š** `https://wordcloud-app.trycloudflare.com/input.html`
5. **å‘é€ä¸€æ¡æ¶ˆæ¯**
6. **åœ¨ä¸»é¡µé¢åº”è¯¥èƒ½çœ‹åˆ°è¯äº‘æ›´æ–°**

### æ­¥éª¤ 6.5ï¼šåœæ­¢æµ‹è¯•

æµ‹è¯•å®Œæˆåï¼Œåœ¨å‘½ä»¤è¡Œçª—å£æŒ‰ `Ctrl + C` åœæ­¢éš§é“ã€‚

**âœ… æœ¬åœ°æµ‹è¯•å®Œæˆï¼** å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œç»§ç»­ä¸‹ä¸€æ­¥ã€‚

---

## ç¬¬ä¸ƒæ­¥ï¼šåœ¨ Railway ä¸Šéƒ¨ç½²éš§é“ï¼ˆè®©éš§é“ä¸€ç›´è¿è¡Œï¼‰

ç°åœ¨æˆ‘ä»¬è¦è®©éš§é“åœ¨ Railway ä¸ŠæŒç»­è¿è¡Œï¼Œè¿™æ ·ä½ å°±ä¸éœ€è¦ä¸€ç›´å¼€ç€ç”µè„‘äº†ã€‚

### æ­¥éª¤ 7.1ï¼šå‡†å¤‡æ–‡ä»¶

åœ¨ä½ çš„é¡¹ç›®æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä»¥ä¸‹æ–‡ä»¶ï¼š

#### æ–‡ä»¶ 1ï¼šåˆ›å»º `Dockerfile.tunnel`

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `Dockerfile.tunnel`ï¼š

```dockerfile
FROM cloudflare/cloudflared:latest

# å¤åˆ¶é…ç½®æ–‡ä»¶
COPY config.yml /etc/cloudflared/config.yml

# å¤åˆ¶è®¤è¯æ–‡ä»¶ï¼ˆéœ€è¦ä»æœ¬åœ°å¤åˆ¶ï¼‰
COPY credentials.json /etc/cloudflared/credentials.json

# è¿è¡Œéš§é“
CMD ["tunnel", "--config", "/etc/cloudflared/config.yml", "run"]
```

#### æ–‡ä»¶ 2ï¼šåˆ›å»º `railway-tunnel.json`ï¼ˆRailway é…ç½®æ–‡ä»¶ï¼‰

```json
{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "DOCKERFILE",
    "dockerfilePath": "Dockerfile.tunnel"
  },
  "deploy": {
    "startCommand": "tunnel --config /etc/cloudflared/config.yml run",
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10
  }
}
```

### æ­¥éª¤ 7.2ï¼šè·å–è®¤è¯æ–‡ä»¶

**Windowsï¼š**
è®¤è¯æ–‡ä»¶ä½ç½®ï¼š`C:\Users\ä½ çš„ç”¨æˆ·å\.cloudflared\xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.json`

**macOS/Linuxï¼š**
è®¤è¯æ–‡ä»¶ä½ç½®ï¼š`~/.cloudflared/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.json`

**é‡è¦ï¼š** è¿™ä¸ªæ–‡ä»¶åŒ…å«ä½ çš„è´¦æˆ·è®¤è¯ä¿¡æ¯ï¼Œ**ä¸è¦åˆ†äº«ç»™ä»»ä½•äººï¼**

### æ­¥éª¤ 7.3ï¼šä¸Šä¼ æ–‡ä»¶åˆ° Railway

#### æ–¹æ³• Aï¼šä½¿ç”¨ Railway Web ç•Œé¢ï¼ˆæ¨èï¼‰

1. **ç™»å½• Railway**
   - è®¿é—® https://railway.app
   - ç™»å½•ä½ çš„è´¦å·

2. **åˆ›å»ºæ–°æœåŠ¡**
   - åœ¨ä½ çš„é¡¹ç›®ä¸­ï¼Œç‚¹å‡» **"New"** â†’ **"Empty Service"**
   - å‘½åä¸ºï¼š`cloudflare-tunnel`ï¼ˆæˆ–ä»»ä½•åå­—ï¼‰

3. **ä¸Šä¼ æ–‡ä»¶**
   - ç‚¹å‡»æœåŠ¡ â†’ **"Settings"** â†’ **"Source"**
   - é€‰æ‹© **"Connect GitHub"** æˆ– **"Upload Files"**
   - ä¸Šä¼ ä»¥ä¸‹æ–‡ä»¶ï¼š
     - `Dockerfile.tunnel`
     - `config.yml`ï¼ˆéœ€è¦ä¿®æ”¹è·¯å¾„ï¼‰
     - `credentials.json`ï¼ˆè®¤è¯æ–‡ä»¶ï¼‰

4. **ä¿®æ”¹é…ç½®æ–‡ä»¶è·¯å¾„**
   åœ¨ Railway ä¸­ï¼Œè·¯å¾„ä¼šä¸åŒã€‚ä¿®æ”¹ `config.yml`ï¼š
   ```yaml
   tunnel: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
   credentials-file: /etc/cloudflared/credentials.json

   ingress:
     - hostname: wordcloud-app.trycloudflare.com
       service: https://web-production-27bb4.up.railway.app
     
     - service: http_status:404
   ```

5. **éƒ¨ç½²**
   - Railway ä¼šè‡ªåŠ¨æ£€æµ‹ Dockerfile å¹¶éƒ¨ç½²
   - ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆé€šå¸¸ 2-5 åˆ†é’Ÿï¼‰

#### æ–¹æ³• Bï¼šä½¿ç”¨ Gitï¼ˆå¦‚æœä½ ç”¨ Gitï¼‰

1. **å°†æ–‡ä»¶æ·»åŠ åˆ°é¡¹ç›®**
   ```bash
   # å¤åˆ¶è®¤è¯æ–‡ä»¶åˆ°é¡¹ç›®ç›®å½•ï¼ˆé‡å‘½åä¸º credentials.jsonï¼‰
   # Windows PowerShell:
   Copy-Item "$env:USERPROFILE\.cloudflared\ä½ çš„éš§é“ID.json" -Destination "credentials.json"
   
   # macOS/Linux:
   cp ~/.cloudflared/ä½ çš„éš§é“ID.json credentials.json
   ```

2. **ä¿®æ”¹ config.yml**
   åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ `config.yml`ï¼š
   ```yaml
   tunnel: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
   credentials-file: /etc/cloudflared/credentials.json

   ingress:
     - hostname: wordcloud-app.trycloudflare.com
       service: https://web-production-27bb4.up.railway.app
     
     - service: http_status:404
   ```

3. **æäº¤åˆ° Git**
   ```bash
   git add Dockerfile.tunnel config.yml credentials.json
   git commit -m "Add Cloudflare Tunnel"
   git push
   ```

4. **åœ¨ Railway ä¸­è¿æ¥ Git**
   - Railway ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶éƒ¨ç½²

### æ­¥éª¤ 7.4ï¼šéªŒè¯éƒ¨ç½²

1. **æŸ¥çœ‹ Railway æ—¥å¿—**
   - åœ¨ Railway ä¸­æ‰“å¼€ä½ çš„éš§é“æœåŠ¡
   - ç‚¹å‡» **"Deployments"** â†’ **"View Logs"**
   - åº”è¯¥çœ‹åˆ°ç±»ä¼¼ï¼š
     ```
     âœ… Tunnel is running
     ```

2. **æµ‹è¯•è®¿é—®**
   - è®¿é—®ï¼š`https://wordcloud-app.trycloudflare.com`
   - åº”è¯¥èƒ½çœ‹åˆ°ä½ çš„åº”ç”¨

3. **å…³é—­æœ¬åœ°éš§é“**
   - å¦‚æœä½ ä¹‹å‰åœ¨æœ¬åœ°è¿è¡Œäº†éš§é“ï¼Œç°åœ¨å¯ä»¥å…³é—­äº†
   - Railway ä¸Šçš„éš§é“ä¼šä¸€ç›´è¿è¡Œ

**âœ… éƒ¨ç½²å®Œæˆï¼** ç°åœ¨ä½ çš„éš§é“åœ¨ Railway ä¸ŠæŒç»­è¿è¡Œäº†ï¼

---

## ç¬¬å…«æ­¥ï¼šéªŒè¯ä¸€åˆ‡æ­£å¸¸

### æ£€æŸ¥æ¸…å•

- [ ] å¯ä»¥è®¿é—® `https://wordcloud-app.trycloudflare.com`
- [ ] ä¸»é¡µé¢å¯ä»¥æ­£å¸¸åŠ è½½
- [ ] è¾“å…¥é¡µé¢ï¼ˆ`/input.html`ï¼‰å¯ä»¥æ­£å¸¸åŠ è½½
- [ ] WebSocket è¿æ¥æˆåŠŸï¼ˆæµè§ˆå™¨æ§åˆ¶å°æ— é”™è¯¯ï¼‰
- [ ] å¯ä»¥å‘é€æ¶ˆæ¯å¹¶çœ‹åˆ°è¯äº‘æ›´æ–°
- [ ] Railway æ—¥å¿—æ˜¾ç¤ºéš§é“æ­£åœ¨è¿è¡Œ

### æµ‹è¯•æ­¥éª¤

1. **æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·**ï¼ˆ`F12`ï¼‰
2. **è®¿é—®ä¸»é¡µé¢**
3. **æŸ¥çœ‹ Consoleï¼ˆæ§åˆ¶å°ï¼‰**
   - åº”è¯¥çœ‹åˆ°ï¼š`âœ“ WebSocketè¿æ¥æˆåŠŸï¼Socket ID: xxx`
   - ä¸åº”è¯¥æœ‰çº¢è‰²é”™è¯¯ä¿¡æ¯

4. **æµ‹è¯•åŠŸèƒ½**
   - æ‰“å¼€æ–°æ ‡ç­¾é¡µï¼š`https://wordcloud-app.trycloudflare.com/input.html`
   - è¾“å…¥ä¸€æ¡æ¶ˆæ¯å¹¶å‘é€
   - è¿”å›ä¸»é¡µé¢ï¼Œåº”è¯¥èƒ½çœ‹åˆ°è¯äº‘æ›´æ–°

**âœ… ä¸€åˆ‡æ­£å¸¸ï¼** æ­å–œä½ å®Œæˆäº†é…ç½®ï¼

---

## ğŸ› å¸¸è§é—®é¢˜æ’é™¤

### é—®é¢˜ 1ï¼šæ— æ³•è®¿é—®åŸŸå

**ç—‡çŠ¶ï¼š** è®¿é—® `https://xxx.trycloudflare.com` æ˜¾ç¤ºé”™è¯¯æˆ–æ— æ³•è¿æ¥

**è§£å†³æ–¹æ³•ï¼š**

1. **æ£€æŸ¥éš§é“æ˜¯å¦è¿è¡Œ**
   - æŸ¥çœ‹ Railway æ—¥å¿—ï¼Œç¡®è®¤éš§é“æ­£åœ¨è¿è¡Œ
   - å¦‚æœæ²¡æœ‰è¿è¡Œï¼Œæ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®

2. **æ£€æŸ¥é…ç½®æ–‡ä»¶**
   - ç¡®è®¤ `config.yml` ä¸­çš„ Railway URL æ­£ç¡®
   - ç¡®è®¤ Railway URL æ˜¯ HTTPSï¼ˆä¸æ˜¯ HTTPï¼‰

3. **æ£€æŸ¥è®¤è¯æ–‡ä»¶**
   - ç¡®è®¤ `credentials.json` æ–‡ä»¶å·²ä¸Šä¼ åˆ° Railway
   - ç¡®è®¤æ–‡ä»¶è·¯å¾„æ­£ç¡®

### é—®é¢˜ 2ï¼šWebSocket è¿æ¥å¤±è´¥

**ç—‡çŠ¶ï¼š** æµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤º WebSocket é”™è¯¯

**è§£å†³æ–¹æ³•ï¼š**

1. **æ£€æŸ¥ Railway æœåŠ¡**
   - ç¡®è®¤ä½ çš„ä¸»åº”ç”¨ï¼ˆè¯äº‘åº”ç”¨ï¼‰åœ¨ Railway ä¸Šæ­£å¸¸è¿è¡Œ
   - ç¡®è®¤ Railway URL å¯ä»¥æ­£å¸¸è®¿é—®

2. **æ£€æŸ¥éš§é“é…ç½®**
   - ç¡®è®¤ `service:` æŒ‡å‘çš„æ˜¯ HTTPS URL
   - ç¡®è®¤ URL æœ«å°¾æ²¡æœ‰æ–œæ  `/`

3. **æ¸…é™¤æµè§ˆå™¨ç¼“å­˜**
   - æŒ‰ `Ctrl+Shift+Delete`ï¼ˆWindowsï¼‰æˆ– `Cmd+Shift+Delete`ï¼ˆMacï¼‰
   - æ¸…é™¤ç¼“å­˜å’Œ Cookie
   - é‡æ–°è®¿é—®

### é—®é¢˜ 3ï¼šéš§é“åœ¨ Railway ä¸Šæ— æ³•å¯åŠ¨

**ç—‡çŠ¶ï¼š** Railway æ—¥å¿—æ˜¾ç¤ºé”™è¯¯æˆ–éš§é“æ— æ³•å¯åŠ¨

**è§£å†³æ–¹æ³•ï¼š**

1. **æ£€æŸ¥æ–‡ä»¶è·¯å¾„**
   - ç¡®è®¤ `config.yml` ä¸­çš„è·¯å¾„æ˜¯ `/etc/cloudflared/credentials.json`
   - ç¡®è®¤ `Dockerfile.tunnel` æ­£ç¡®å¤åˆ¶äº†æ–‡ä»¶

2. **æ£€æŸ¥è®¤è¯æ–‡ä»¶**
   - ç¡®è®¤ `credentials.json` æ–‡ä»¶å·²ä¸Šä¼ 
   - ç¡®è®¤æ–‡ä»¶åæ­£ç¡®ï¼ˆä¸æ˜¯ `.txt` æˆ– `.json.txt`ï¼‰

3. **æŸ¥çœ‹è¯¦ç»†æ—¥å¿—**
   - åœ¨ Railway ä¸­æŸ¥çœ‹å®Œæ•´çš„é”™è¯¯æ—¥å¿—
   - æ ¹æ®é”™è¯¯ä¿¡æ¯è°ƒæ•´é…ç½®

### é—®é¢˜ 4ï¼šåŸŸåè®¿é—®å¾ˆæ…¢

**ç—‡çŠ¶ï¼š** è®¿é—®åŸŸåå¾ˆæ…¢ï¼Œä¸å¦‚ç›´æ¥è®¿é—® Railway

**è§£å†³æ–¹æ³•ï¼š**

1. **ç­‰å¾… DNS ä¼ æ’­**
   - æ–°åˆ›å»ºçš„åŸŸåå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿåˆ°å‡ å°æ—¶æ‰èƒ½å®Œå…¨ç”Ÿæ•ˆ
   - è€å¿ƒç­‰å¾…

2. **æ£€æŸ¥ Cloudflare çŠ¶æ€**
   - è®¿é—® Cloudflare Dashboard
   - ç¡®è®¤éš§é“çŠ¶æ€æ­£å¸¸

3. **ä½¿ç”¨ä¸åŒçš„åŸŸå**
   - å°è¯•åˆ›å»ºå¦ä¸€ä¸ªåŸŸåï¼Œçœ‹æ˜¯å¦æ›´å¿«

### é—®é¢˜ 5ï¼šå¿˜è®°éš§é“ ID

**è§£å†³æ–¹æ³•ï¼š**

**Windowsï¼š**
```powershell
cd $env:USERPROFILE\Desktop
.\cloudflared.exe tunnel list
```

**macOS/Linuxï¼š**
```bash
cloudflared tunnel list
```

è¿™ä¼šæ˜¾ç¤ºä½ æ‰€æœ‰çš„éš§é“å’Œå®ƒä»¬çš„ IDã€‚

### é—®é¢˜ 6ï¼šæƒ³åˆ é™¤éš§é“é‡æ–°å¼€å§‹

**è§£å†³æ–¹æ³•ï¼š**

1. **åˆ é™¤éš§é“**
   ```bash
   cloudflared tunnel delete wordcloud
   ```

2. **åˆ é™¤ DNS è·¯ç”±**
   ```bash
   cloudflared tunnel route dns delete wordcloud-app.trycloudflare.com
   ```

3. **é‡æ–°å¼€å§‹** æŒ‰ç…§æœ¬æ•™ç¨‹é‡æ–°åˆ›å»º

---

## ğŸ“ é‡è¦æç¤º

### âš ï¸ å®‰å…¨æç¤º

1. **ä¸è¦åˆ†äº«è®¤è¯æ–‡ä»¶**
   - `credentials.json` æ–‡ä»¶åŒ…å«ä½ çš„è´¦æˆ·è®¤è¯ä¿¡æ¯
   - ä¸è¦ä¸Šä¼ åˆ°å…¬å¼€çš„ Git ä»“åº“
   - å¦‚æœæ³„éœ²ï¼Œç«‹å³åˆ é™¤éš§é“å¹¶é‡æ–°åˆ›å»º

2. **ä¿æŠ¤ä½ çš„éš§é“**
   - ä¸è¦å°†éš§é“ ID åˆ†äº«ç»™ä¸ä¿¡ä»»çš„äºº
   - å®šæœŸæ£€æŸ¥éš§é“çŠ¶æ€

### ğŸ’¡ ä½¿ç”¨å»ºè®®

1. **ä¿æŒéš§é“è¿è¡Œ**
   - ç¡®ä¿ Railway ä¸Šçš„éš§é“æœåŠ¡ä¸€ç›´è¿è¡Œ
   - å¦‚æœéš§é“åœæ­¢ï¼ŒåŸŸåå°†æ— æ³•è®¿é—®

2. **ç›‘æ§æ—¥å¿—**
   - å®šæœŸæŸ¥çœ‹ Railway æ—¥å¿—
   - å¦‚æœå‘ç°é”™è¯¯ï¼ŒåŠæ—¶å¤„ç†

3. **å¤‡ä»½é…ç½®**
   - ä¿å­˜ä½ çš„ `config.yml` æ–‡ä»¶
   - è®°å½•ä½ çš„éš§é“ ID å’ŒåŸŸå

### ğŸ¯ åŸŸåè¯´æ˜

- **å…è´¹åŸŸåæ ¼å¼ï¼š** `xxx.trycloudflare.com`
- **åŸŸåæ°¸ä¹…æœ‰æ•ˆ**ï¼ˆåªè¦éš§é“åœ¨è¿è¡Œï¼‰
- **å¯ä»¥åˆ›å»ºå¤šä¸ªåŸŸå**ï¼ˆåˆ›å»ºå¤šä¸ªéš§é“ï¼‰
- **åŸŸåæ— æ³•è‡ªå®šä¹‰**ï¼ˆå¿…é¡»æ˜¯ `.trycloudflare.com` ç»“å°¾ï¼‰

---

## ğŸ‰ å®Œæˆï¼

æ­å–œä½ å®Œæˆäº† Cloudflare Tunnel çš„é…ç½®ï¼ç°åœ¨ä½ çš„åº”ç”¨ï¼š

- âœ… é€šè¿‡ Cloudflare å…è´¹äºŒçº§åŸŸåè®¿é—®
- âœ… äº«å— Cloudflare CDN åŠ é€Ÿ
- âœ… è‡ªåŠ¨è·å¾— HTTPS è¯ä¹¦
- âœ… æ”¯æŒ WebSocketï¼ˆè¯äº‘åŠŸèƒ½æ­£å¸¸ï¼‰
- âœ… å®Œå…¨å…è´¹

**ä½ çš„å…è´¹åŸŸåï¼š** `https://wordcloud-app.trycloudflare.com`

**ä¸‹ä¸€æ­¥ï¼š**
- åˆ†äº«ä½ çš„åŸŸåç»™æœ‹å‹ä½¿ç”¨
- ç›‘æ§è®¿é—®æƒ…å†µ
- å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå‚è€ƒæ•…éšœæ’é™¤éƒ¨åˆ†

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹æœ¬æ•™ç¨‹çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. æŸ¥çœ‹ Cloudflare Tunnel å®˜æ–¹æ–‡æ¡£ï¼šhttps://developers.cloudflare.com/cloudflare-one/connections/connect-apps/
3. æŸ¥çœ‹ Railway æ—¥å¿—ï¼Œå¯»æ‰¾é”™è¯¯ä¿¡æ¯
4. ç¡®è®¤æ‰€æœ‰é…ç½®æ­¥éª¤éƒ½æ­£ç¡®å®Œæˆ

---

## ğŸ“š ç›¸å…³æ–‡ä»¶

- `server.js` - ä½ çš„æœåŠ¡å™¨ä»£ç ï¼ˆå·²ä¼˜åŒ–æ”¯æŒ Cloudflareï¼‰
- `config.yml` - Cloudflare Tunnel é…ç½®æ–‡ä»¶
- `Dockerfile.tunnel` - Railway éƒ¨ç½²é…ç½®æ–‡ä»¶

---

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼** ğŸš€

